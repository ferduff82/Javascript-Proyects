<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="jquery-ui/js/jquery-1.10.2.js"></script>
    <script src="jquery-ui/js/jquery-ui-1.10.4.custom.js"></script>
    <link rel="stylesheet" type="text/css" href="jquery-ui/css/ui-lightness/jquery-ui-1.10.4.custom.css">
<style>

body{
  font-family: arial;
}

.coral{
  background-color: coral;
}
.aquamarine{
  background-color: aquamarine;
}
.chocolate{
  background-color: chocolate;
}
.crimson{
  background-color: crimson;
}
.personalizados{
  background-color: cadetblue;
}

.coral:hover,
.aquamarine:hover,
.chocolate:hover,
.crimson:hover,
.personalizados:hover{
  background-color: blue !important;
}

.coral:active,
.aquamarine:active,
.chocolate:active,
.crimson:active,
.personalizados:active{
  background-color: blue !important;
}

.borrarCompra{
  float: right;
}

#editItem{
  margin-left:30px;
}

</style>

</head>
<body>

<h3>Control de gastos</h3>

<input type="text" name="lastname" id="categories" placeholder="Ingrese Categoría">
<input id="get-categories" type="button" value="Ingrese Categoría" />
<input id="get-categories" type="button" value="Remover Categoría" />
<br>

<input type="text" name="lastname" id="product" placeholder="Ingrese Producto">
<input type="text" name="lastname" id="price" placeholder="Ingrese Precio">
<input type="text" name="lastname" id="brand" placeholder="Ingrese Marca">
<input type="text" name="lastname" id="kilos" placeholder="Ingrese Cantidad">
<input type="text" name="lastname" id="date" placeholder="Ingrese Fecha">
<select id="category">
  <option value="" disabled selected>Categoria</option>
  <option value="Supermercado">Supermercado</option>
  <option value="Impuestos">Impuestos</option>
  <option value="Salidas">Salidas</option>
  <option value="Varios">Varios</option>
</select>
<br>

<input id="get-values" type="button" value="Ingrese Gasto" />

<div id="demo"></div>
<div id="alert"></div>

<script>

/* Modelo */

function getValues( product ) {

  this.price = document.getElementById('price').value;
  this.kilos = document.getElementById('kilos').value;
  this.product = document.getElementById('product').value;
  this.date = document.getElementById('date').value;
  this.brand = document.getElementById('brand').value;
  this.category = document.getElementById('category').value;

  var a = isNaN(this.price);
  var b = isNaN(this.kilos);

  if (a === true && b === true) {
    alert("Price and kilos must be numbers");
    return false;
  } else {
 
    this.getInfoProduct = function () {
      return this.product + "  ";
    };

    this.getInfoDate = function () {
      return this.date + "  ";
    };

    this.getInfoPrice = function () {
      return "$" + this.price + "  ";
    };

    this.getInfoKilos = function () {
      return "Cantidad: " + this.kilos + "  ";
    };

    this.getInfoBrand = function () {
      return this.brand + "  ";
    };

    this.getInfoCategory = function () {
      return this.category + "  ";
    };
  }
}

/* Instancias del Modelo */

function newProduct (){

  var nuevoGasto = new getValues(product);

    /* Validación de Campos vacíos */

    if(nuevoGasto.getInfoCategory() == "  "){
      alert('Debe ingresar una categoría de compra')
      return false
    } else if (nuevoGasto.getInfoProduct() == "  "){
      alert('Debe ingresar un producto')
      return false
    } else if (nuevoGasto.getInfoDate() == "  "){
      alert('Debe ingresar una fecha')
      return false
    } else if (nuevoGasto.getInfoPrice() == "$  "){
      alert('Debe ingresar un precio')
      return false
    }

    /* Push into array */

    var objects = [];

        objects.push(nuevoGasto.getInfoProduct())
        objects.push(nuevoGasto.getInfoDate())
        objects.push(nuevoGasto.getInfoPrice())

        /* Don't push if empty values */

        if (nuevoGasto.getInfoKilos() != "Cantidad:   ") {
          objects.push(nuevoGasto.getInfoKilos())
        }
        if (nuevoGasto.getInfoBrand() != "  ") {
          objects.push(nuevoGasto.getInfoBrand())
        };

        objects.push(nuevoGasto.getInfoCategory())
        alert("Su producto ha sido ingresado con éxito");
        console.log(objects);

        /* Loop array with for with background color change on category select */

        text = "";

        /* Re-search on array to asign color */

        if (nuevoGasto.getInfoKilos() == "Cantidad:   " && nuevoGasto.getInfoBrand() == "  ") {
          var getCategoryValue = objects[3];
        }else if (nuevoGasto.getInfoKilos() == "Cantidad:   " && nuevoGasto.getInfoBrand() != "  ") {
          var getCategoryValue = objects[4];
        }else if (nuevoGasto.getInfoKilos() != "Cantidad:   " && nuevoGasto.getInfoBrand() == "  ") {
          var getCategoryValue = objects[4];
        }else{
          var getCategoryValue = objects[5];
        }

        var getProductIndex = objects.indexOf(nuevoGasto.getInfoProduct());

        var createUl = document.createElement('ul');
        var getDemo = document.getElementById("demo");
        var createRemovePurchaseButton = document.createElement('input');
            createRemovePurchaseButton.setAttribute("type","button");
            createRemovePurchaseButton.setAttribute("value","Borrar Compra");



            createRemovePurchaseButton.setAttribute("class","borrarCompra");
            getDemo.appendChild(createUl);
            createUl.appendChild(createRemovePurchaseButton);

        for (var i = 0; i < objects.length; i++) {

        var newElem = document.createElement("li");
            newElem.innerHTML = text = objects[i];
        var createEditItem = document.createElement('input');
            createEditItem.setAttribute("type","button");
            createEditItem.setAttribute("value","Editar");
            newElem.appendChild(createEditItem);

          if (getCategoryValue == "Supermercado  "){
            var getNumber = makeid();
            createUl.setAttribute("id",getNumber);
            var selectUL = document.getElementById(getNumber);
                selectUL.classList.add('coral')
                selectUL.appendChild(newElem);
          } else if (getCategoryValue == "Impuestos  "){
            var getNumber = makeid();
            createUl.setAttribute("id",getNumber);
            var selectUL = document.getElementById(getNumber);
                selectUL.classList.add('aquamarine')
                selectUL.appendChild(newElem);
          } else if (getCategoryValue == "Salidas  "){
            var getNumber = makeid();
            createUl.setAttribute("id",getNumber);
            var selectUL = document.getElementById(getNumber);
                selectUL.classList.add('chocolate')
                selectUL.appendChild(newElem);
          } else if (getCategoryValue == "Varios  "){
            var getNumber = makeid();
            createUl.setAttribute("id",getNumber);
            var selectUL = document.getElementById(getNumber);
                selectUL.classList.add('crimson')
                selectUL.appendChild(newElem);
          } else {
            var getNumber = makeid();
            createUl.setAttribute("id",getNumber);
            var selectUL = document.getElementById(getNumber);
                selectUL.classList.add('personalizados')
                selectUL.appendChild(newElem);
          }
        }

        /* Remueve los datos del input */

        document.getElementById('product').value=null;
        document.getElementById('date').value=null;
        document.getElementById('price').value=null;
        document.getElementById('kilos').value=null;
        document.getElementById('brand').value=null;

  /* Eventos dentro de final de función */

    /* Borrar Compra */



    var borrarCompra = document.querySelector(".borrarCompra");
    borrarCompra.addEventListener("click", remove, false);

/*
    

    function remove(event){
      event.target;
      console.dir(event);
      debugger
      $(this).parent("ul").remove();
      objects.splice(getProductIndex,7);
      console.log(objects);
      alert("Compra borrada");
      $("#alert").text("Element removido");
      setTimeout(function(){
        document.getElementById('alert').innerHTML="";
      }, 3000);
    }

    /* Editar Items 

    var editarItemCategory = document.getElementById(randomEditIdCategory);
        editarItemCategory.addEventListener("click", editItem, false);      

    function editItem(){
        var edit = prompt("Ingrese el cambio de valor");
          if (edit != null) {
            alert("Cambio realizado con éxito con valor "+edit+"");
          }
    }
    */

  /* Tools *////////////////////////////////////

    /* Genera String aleatorias de 5 caracteres */

    function makeid() {
      var text = "";
      var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
      for( var i=0; i < 5; i++ )
        text += possible.charAt(Math.floor(Math.random() * possible.length));
      return text;
    }
}


/* Agregar categorías */

function createCategories (){

  var getCategorieValue = document.getElementById('categories').value;

  if (getCategorieValue.length<3) {
      alert("Es necesario ingresar 3 letras por categoría por lo menos");
      return false;
  } else {

  var newElem = document.createElement ("option");
  newElem.innerHTML = getCategorieValue;
  var container = document.getElementById ("category");
  container.appendChild (newElem);
  alert("Su categoría "+ getCategorieValue +" se ha ingresado con éxito");

  /* Remueve los datos del input */

  document.getElementById('categories').value=null;

  }
}

/* Eventos */

document.getElementById('get-values').onclick = newProduct;
document.getElementById('get-categories').onclick = createCategories;

/* Evento datepicker*/

$( function() {
  $( "#date" ).datepicker();
});

/* Uso de argumentos

var test = "hola";

alertar();

function alertar(test){
  alert(test);
}

*/

</script>
</body>
</html>
